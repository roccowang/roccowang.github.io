---
title: C和进程间通信(3)-有名管道
tags:
  - Linux
  - C/C++
date: 2016-08-15 14:26:42
---

有名管道
<!--more-->


# 参考
[linux系统编程之管道（三）：命令管道（FIFO)][1]
man pages

---

# 匿名管道的局限性
- 没有名字, 因此只能在具有亲缘关系的进程之间通信
- 只能单向通信
- 缓冲区域大小有限
- 只能传送无格式字节流, 这需要写入和读出时约定好数据格式

# 有名管道的特性
- 有名字, 是一种特殊的文件
- FIFO必须严格先进先出, 不支持lseek()这样的操作
- 重要区别在于创建于打开方式不同, 这些工作完成了以后, 两者是一样的

# 有名管道的打开规则
- 写打开时
    - 如果有进程已经读打开, 则正常返回
    - 如果没有进程已经读打开, 如果是阻塞打开, 那么会阻塞; 否则返回ENXIO错误
- 读打开时
    - 如果有进程已经写打开, 则正常返回
    - 如果没有进程已经写打开, 如果是阻塞打开, 那么会阻塞; 否则成功返回
    - 阻塞打开只对本进程的第一次读操作有效, 后面都是非阻塞读

# 有名管道的读写规则
- 读取
    - 如果已有进程写打开了FIFO
        - 如果当前FIFO为空, 阻塞打开则阻塞, 否则EAGAIN
        - 如果有其他进程正在读取FIFO内的数据, 则阻塞打开情况下也会阻塞
- 写入
    - 和匿名管道一样

# 其他问题
- 可不可以用读写方式打开FIFO(RDWR)

[1]:http://www.cnblogs.com/mickole/p/3192909.html


